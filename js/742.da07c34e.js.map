{"version":3,"file":"js/742.da07c34e.js","mappings":"odAoCA,MAAMA,EAAaC,EAAAA,EAAOC,aAAaC,MAAMC,OAAOC,QAC9CC,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAWD,EAAAA,EAAAA,IAAI,IAEfF,EAAUI,aAAaC,QAAQ,WAE/BC,GAAaJ,EAAAA,EAAAA,KAAI,GAEjBK,EAAWA,KACbC,IAAAA,KAAO,CACHC,IAAK,kCACLC,KAAM,MACNC,KAAM,CACFX,QAASL,GAEbiB,OAAAA,CAAQC,GACsB,WAAtBA,EAAKC,eACLb,EAAMH,MAAQe,EAAKZ,MACnBE,EAASL,MAAQe,EAAKV,UAEtBY,QAAQC,IAAIH,EAAKC,cAGzB,EACAG,KAAAA,CAAMJ,GACFE,QAAQC,IAAIH,EAChB,GACF,EAGNN,IAEA,MAAMW,EAASA,CAACL,EAAMH,KAClB,IAAIS,EAAON,EAAKO,OAAOC,MAAM,GACzBC,EAAW,IAAIC,SACnBD,EAASE,OAAO,OAAQL,GACxBG,EAASE,OAAO,OAAQd,GACxBF,IAAAA,KAAO,CACHC,IAAK,oCACLC,KAAM,OACNe,QAAS,CACLC,cAAe,UAAYC,EAAAA,EAAMC,MAAMC,KAAKC,OAEhDnB,KAAMW,EACNS,aAAa,EACbC,aAAa,EACbpB,OAAAA,CAAQC,GACJE,QAAQC,IAAIH,GACZjB,EAAAA,EAAOqC,GAAG,EACd,EACAhB,KAAAA,CAAMJ,GACFE,QAAQC,IAAIH,EAChB,GACF,EAGAqB,EAAaA,KACf,MAAMC,EAAW3B,IAAE,eACnB2B,EAASC,OAAO,E,+lCCxFpB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://starpre/./src/views/user/UserView.vue","webpack://starpre/./src/views/user/UserView.vue?c77d"],"sourcesContent":["<template>\r\n    <div class=\"user\">\r\n        <div class=\"user-img\">\r\n            <el-image class=\"user-back\" :src=\"'http://localhost:3010/User/' + nowaccount + '/background'\" fit=\"cover\">\r\n            </el-image>\r\n\r\n            <input id=\"background\" type=\"file\" accept=\"image/*\" style=\"display:none\" @change=\"update($event, 'background')\">\r\n\r\n\r\n            <el-button class=\"img-button\" round @click=\"updateback\" v-show=\"account === nowaccount\">\r\n                更改壁纸\r\n            </el-button>\r\n\r\n\r\n        </div>\r\n        <div class=\"user-avatar\">\r\n            <input type=\"file\" accept=\"image/*\" class=\"avatar-input\" @change=\"update($event, 'avatar')\"\r\n                :style=\"'background-image:url(' + store.state.user.photo + ')'\" v-show=\"account === nowaccount\">\r\n            <el-avatar :size=\"100\" :src=\"photo\" @click=\"updateshow = true\" v-show=\"account !== nowaccount\"></el-avatar>\r\n            <div class=\"user-name\">\r\n                <el-text style=\"font-size: 25px;font-weight: bold;\"> {{ username }} </el-text>\r\n            </div>\r\n        </div>\r\n        <div class=\"user-main\">\r\n\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport store from '@/store';\r\nimport { ref } from 'vue'\r\nimport $ from 'jquery'\r\nimport router from '@/router';\r\n\r\nconst nowaccount = router.currentRoute.value.params.account\r\nconst photo = ref('')\r\nconst username = ref('')\r\n\r\nconst account = localStorage.getItem(\"account\")\r\n\r\nconst updateshow = ref(false)\r\n\r\nconst downuser = () => {\r\n    $.ajax({\r\n        url: \"http://localhost:3010/User/info\",\r\n        type: \"get\",\r\n        data: {\r\n            account: nowaccount,\r\n        },\r\n        success(resp) {\r\n            if (resp.error_message == \"success\") {\r\n                photo.value = resp.photo;\r\n                username.value = resp.username;\r\n            } else {\r\n                console.log(resp.error_message);\r\n            }\r\n\r\n        },\r\n        error(resp) {\r\n            console.log(resp);\r\n        }\r\n    })\r\n}\r\n\r\ndownuser()\r\n\r\nconst update = (resp, type) => {\r\n    let file = resp.target.files[0];\r\n    let formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('type', type);\r\n    $.ajax({\r\n        url: \"http://localhost:3010/User/upload\",\r\n        type: \"post\",\r\n        headers: {\r\n            Authorization: \"Bearer \" + store.state.user.token,\r\n        },\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        success(resp) {\r\n            console.log(resp);\r\n            router.go(0)\r\n        },\r\n        error(resp) {\r\n            console.log(resp);\r\n        }\r\n    })\r\n}\r\n\r\nconst updateback = () => {\r\n    const fileBack = $(\"#background\");\r\n    fileBack.click();\r\n}\r\n</script>\r\n\r\n<style  lang=\"less\" scoped>\r\n// 用户页面\r\n.user {\r\n\r\n    background-color: rgb(247, 248, 249);\r\n\r\n    // 占比大小\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    // 背景图像\r\n    .user-img {\r\n\r\n        // 位置信息\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n\r\n        // 大小\r\n        width: 100%;\r\n        height: 70%;\r\n\r\n        // 图层逻辑\r\n        z-index: 1;\r\n\r\n        // 不可点击\r\n        pointer-events: none;\r\n\r\n        .user-back {\r\n            z-index: 1;\r\n\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n\r\n        .img-button {\r\n\r\n            // 可点击\r\n            pointer-events: fill;\r\n\r\n            position: absolute;\r\n            z-index: 10;\r\n\r\n            width: 200px;\r\n            height: 35px;\r\n\r\n            right: 5%;\r\n            top: 20%;\r\n\r\n            background-color: rgba(0, 0, 0, 0.5);\r\n            color: white;\r\n\r\n        }\r\n    }\r\n\r\n    // 用户头像\r\n    .user-avatar {\r\n\r\n        position: absolute;\r\n        top: 45%;\r\n        left: 20%;\r\n        z-index: 2;\r\n\r\n        display: flex;\r\n\r\n        .avatar-input {\r\n            border-radius: 50%;\r\n            width: 100px;\r\n            height: 100px;\r\n            background-size: cover;\r\n            font-size: 0;\r\n        }\r\n\r\n        .user-name {\r\n            margin-top: 60px;\r\n            margin-left: 10px;\r\n        }\r\n\r\n    }\r\n\r\n    // 主页内容\r\n    .user-main {\r\n\r\n        // 位置信息\r\n        position: absolute;\r\n        top: 50%;\r\n\r\n        // 背景颜色\r\n        background-color: white;\r\n\r\n        // 图层逻辑\r\n        z-index: 1;\r\n\r\n        // 大小\r\n        height: 100%;\r\n        width: 100%;\r\n\r\n        // 圆弧边界\r\n        border-radius: 10px;\r\n    }\r\n}\r\n</style>","import script from \"./UserView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserView.vue?vue&type=style&index=0&id=4055bc81&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4055bc81\"]])\n\nexport default __exports__"],"names":["nowaccount","router","currentRoute","value","params","account","photo","ref","username","localStorage","getItem","updateshow","downuser","$","url","type","data","success","resp","error_message","console","log","error","update","file","target","files","formData","FormData","append","headers","Authorization","store","state","user","token","processData","contentType","go","updateback","fileBack","click","__exports__"],"sourceRoot":""}